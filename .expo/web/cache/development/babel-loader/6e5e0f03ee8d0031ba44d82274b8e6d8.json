{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\91944\\\\Dropbox\\\\My PC (LAPTOP-4MDLAJMG)\\\\Desktop\\\\react_test2\\\\studentScreens\\\\ProfileScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport { Input, Icon, Avatar } from \"react-native-elements\";\nimport MyHeader from \"../components/MyHeader\";\nimport db from \"../config\";\nimport firebase from \"firebase\";\nimport { RFValue } from \"react-native-responsive-fontsize\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport DatePicker from 'react-native-datepicker';\n\nvar ProfileScreen = function (_Component) {\n  _inherits(ProfileScreen, _Component);\n\n  var _super = _createSuper(ProfileScreen);\n\n  function ProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, ProfileScreen);\n\n    _this = _super.call(this);\n\n    _this.resetnewPassword = function (newPassword, password, user) {\n      var navigation = _this.props.navigation;\n      var user = firebase.auth().currentUser;\n\n      if (newPassword === password) {\n        user.updatePassword(newPassword).then(function () {\n          ToastAndroid.showWithGravityAndOffset(\"Password updated Successfully\", ToastAndroid.LONG, ToastAndroid.BOTTOM, 25, 50), db.collection('students').doc(firebase.auth().currentUser.email).update({\n            mainPassword: newPassword\n          }), firebase.auth().signOut(), navigation.navigate(\"LoginScreen\");\n        }).catch(function (error) {\n          var errorMessage = error.message;\n          Alert.alert(errorMessage);\n        });\n      } else {\n        Alert.alert(\"password doesn't match\\nCheck your password.\");\n      }\n    };\n\n    _this.profileUpdate = function (url) {\n      db.collection(\"students\").doc(_this.state.userid).update({\n        imageurl: url\n      });\n    };\n\n    _this.getUserDetails = function () {\n      db.collection(\"students\").where(\"email_id\", \"==\", _this.state.userid).onSnapshot(function (querySnapshot) {\n        querySnapshot.forEach(function (doc) {\n          _this.setState({\n            name: doc.data().name,\n            grade: doc.data().grade,\n            section: doc.data().section,\n            contact: doc.data().contact,\n            id: doc.data().id,\n            docId: doc.id\n          });\n        });\n      });\n    };\n\n    _this.selectPicture = function _callee() {\n      var _await$ImagePicker$la, cancelled, uri;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                aspect: [4, 3],\n                quality: 1\n              }));\n\n            case 2:\n              _await$ImagePicker$la = _context.sent;\n              cancelled = _await$ImagePicker$la.cancelled;\n              uri = _await$ImagePicker$la.uri;\n\n              if (!cancelled) {\n                _this.uploadImage(uri, _this.state.userid);\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.uploadImage = function _callee2(uri, imageName) {\n      var response, blob, ref;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(fetch(uri));\n\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(response.blob());\n\n            case 5:\n              blob = _context2.sent;\n              ref = firebase.storage().ref().child(\"user_profiles/\" + imageName);\n              return _context2.abrupt(\"return\", ref.put(blob).then(function (response) {\n                _this.fetchImage(imageName);\n              }));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.fetchImage = function (imageName) {\n      var storageRef = firebase.storage().ref().child(\"user_profiles/\" + imageName);\n      storageRef.getDownloadURL().then(function (url) {\n        _this.setState({\n          image: url\n        }), _this.profileUpdate(url);\n      }).catch(function (error) {\n        _this.setState({\n          image: \"https://firebasestorage.googleapis.com/v0/b/inbo-chat-a81c7.appspot.com/o/user_profiles%2F0c3b3adb1a7530892e55ef36d3be6cb8.png?alt=media&token=7818f4b2-e6cf-4342-8666-424c4636a430\"\n        });\n      });\n    };\n\n    _this.state = {\n      contact: \"\",\n      docId: \"\",\n      userid: firebase.auth().currentUser.email,\n      image: '#',\n      name: \"\",\n      section: '',\n      grade: '',\n      id: '',\n      newPassword: '',\n      password: '',\n      date: ''\n    };\n    return _this;\n  }\n\n  _createClass(ProfileScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUserDetails();\n      this.fetchImage(this.state.userid);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: {\n          flex: 1.12,\n          backgroundColor: '#ffefff'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }, React.createElement(ScrollView, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.12\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }\n      }, React.createElement(MyHeader, {\n        title: \"Profile\",\n        navigation: this.props.navigation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 0.35\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.3,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          marginTop: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }\n      }, React.createElement(Avatar, {\n        rounded: true,\n        source: {\n          uri: this.state.image\n        },\n        size: RFValue(200),\n        onPress: function onPress() {\n          return _this2.selectPicture();\n        },\n        title: this.state.name,\n        showEditButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 29\n        }\n      }), React.createElement(View, {\n        style: {\n          marginTop: -30,\n          alignItems: 'flex-end',\n          marginLeft: RFValue(133)\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }\n      }, React.createElement(Icon, {\n        name: \"camera-retro\",\n        type: \"font-awesome-5\",\n        color: \"#fabf10\",\n        solid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 33\n        }\n      })), React.createElement(Text, {\n        style: {\n          fontWeight: \"300\",\n          fontSize: RFValue(20),\n          color: \"#000\",\n          padding: RFValue(10)\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 29\n        }\n      }, this.state.name))), React.createElement(View, {\n        style: styles.formContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.65\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 29\n        }\n      }, \"Name \"), React.createElement(Text, {\n        style: styles.label1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 29\n        }\n      }, this.state.name), React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }\n      }, \"Contact \"), React.createElement(Text, {\n        style: styles.label1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 29\n        }\n      }, this.state.contact), React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 29\n        }\n      }, \"Grade \"), React.createElement(Text, {\n        style: styles.label1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 29\n        }\n      }, this.state.grade), React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }\n      }, \"Section \"), React.createElement(Text, {\n        style: styles.label1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 29\n        }\n      }, this.state.section), React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 29\n        }\n      }, \"USER ID \"), React.createElement(Text, {\n        style: styles.label1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 29\n        }\n      }, this.state.userid), React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }\n      }, \"PASS ID \"), React.createElement(Text, {\n        style: styles.label1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 29\n        }\n      }, this.state.id), React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 29\n        }\n      }, \"Date of Birth \"), React.createElement(DatePicker, {\n        style: {\n          width: 200,\n          marginLeft: RFValue(10)\n        },\n        date: this.state.date,\n        mode: \"date\",\n        placeholder: \"select date\",\n        format: \"DD-MM-YYYY\",\n        minDate: this.state.minDate,\n        maxDate: this.state.maxDate,\n        confirmBtnText: \"Confirm\",\n        cancelBtnText: \"Cancel\",\n        customStyles: {\n          dateIcon: {\n            position: 'absolute',\n            left: 0,\n            top: 4,\n            marginLeft: 0\n          },\n          dateInput: {\n            marginLeft: 36\n          }\n        },\n        onDateChange: function onDateChange(date) {\n          _this2.setState({\n            checkdob: date\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 29\n        }\n      }), React.createElement(View, {\n        style: {\n          marginTop: RFValue(15),\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: styles.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 33\n        }\n      }, \"Reset Password \"), React.createElement(Input, {\n        style: styles.loginBox,\n        placeholder: 'Password',\n        secureTextEntry: true,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            password: text\n          });\n        },\n        leftIcon: React.createElement(Icon, {\n          name: \"user-lock\",\n          size: RFValue(35),\n          color: \"#fabf10\",\n          type: \"font-awesome-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 41\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 33\n        }\n      }), React.createElement(Input, {\n        style: styles.loginBox,\n        placeholder: 'Confrim Password',\n        secureTextEntry: true,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            newPassword: text\n          });\n        },\n        leftIcon: React.createElement(Icon, {\n          name: \"user-lock\",\n          size: RFValue(35),\n          color: \"#fabf10\",\n          type: \"font-awesome-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 41\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 33\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.registerButton,\n        onPress: function onPress() {\n          _this2.resetnewPassword(_this2.state.newPassword, _this2.state.password, firebase.auth().currentUser.email);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: styles.registerButtonText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 37\n        }\n      }, \"Reset Password\")))))));\n    }\n  }]);\n\n  return ProfileScreen;\n}(Component);\n\nexport { ProfileScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"#E5F7FE\"\n  },\n  formContainer: {\n    flex: 0.88,\n    justifyContent: 'center'\n  },\n  label: {\n    fontSize: RFValue(15),\n    color: \"#717D7E\",\n    fontWeight: 'bold',\n    padding: RFValue(10),\n    marginLeft: RFValue(20)\n  },\n  label1: {\n    fontSize: RFValue(18),\n    color: \"#a901ff\",\n    fontWeight: 'bold',\n    marginLeft: RFValue(50)\n  },\n  button: {\n    width: \"75%\",\n    height: RFValue(60),\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: RFValue(50),\n    backgroundColor: \"#32867d\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 8\n    },\n    shadowOpacity: 0.44,\n    shadowRadius: 10.32,\n    elevation: 16,\n    marginTop: RFValue(35)\n  },\n  buttonView: {\n    flex: 0.22,\n    alignItems: \"center\",\n    marginTop: RFValue(150)\n  },\n  buttonView1: {\n    flex: 0.22,\n    alignItems: \"center\",\n    marginTop: RFValue(50)\n  },\n  buttonText: {\n    fontSize: RFValue(23),\n    fontWeight: \"bold\",\n    color: \"#fff\"\n  },\n  cancelButtonText: {\n    fontSize: RFValue(20),\n    fontWeight: 'bold',\n    color: \"#32867d\",\n    marginTop: RFValue(10),\n    textAlign: 'center'\n  },\n  scrollview: {\n    flex: 1,\n    backgroundColor: \"#fff\"\n  },\n  firstNameModal: {\n    flex: 0.5,\n    height: 150\n  },\n  logo: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: RFValue(10),\n    height: RFValue(280)\n  },\n  loginBox: {\n    width: \"80%\",\n    height: RFValue(50),\n    borderWidth: 1.5,\n    borderColor: \"#ffffff\",\n    fontSize: RFValue(20),\n    paddingLeft: RFValue(10)\n  },\n  registerButton: {\n    width: \"75%\",\n    height: RFValue(50),\n    marginTop: RFValue(20),\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: RFValue(3),\n    backgroundColor: \"#32867d\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 8\n    },\n    shadowOpacity: 0.44,\n    shadowRadius: 10.32,\n    elevation: 16,\n    marginTop: RFValue(10)\n  },\n  registerButtonText: {\n    fontSize: RFValue(23),\n    fontWeight: \"bold\",\n    color: \"#fff\"\n  }\n});","map":{"version":3,"sources":["C:/Users/91944/Dropbox/My PC (LAPTOP-4MDLAJMG)/Desktop/react_test2/studentScreens/ProfileScreen.js"],"names":["React","Component","Input","Icon","Avatar","MyHeader","db","firebase","RFValue","ImagePicker","DatePicker","ProfileScreen","resetnewPassword","newPassword","password","user","navigation","props","auth","currentUser","updatePassword","then","ToastAndroid","showWithGravityAndOffset","LONG","BOTTOM","collection","doc","email","update","mainPassword","signOut","navigate","catch","error","errorMessage","message","Alert","alert","profileUpdate","url","state","userid","imageurl","getUserDetails","where","onSnapshot","querySnapshot","forEach","setState","name","data","grade","section","contact","id","docId","selectPicture","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","cancelled","uri","uploadImage","imageName","fetch","response","blob","ref","storage","child","put","fetchImage","storageRef","getDownloadURL","image","date","flex","backgroundColor","justifyContent","alignItems","marginTop","marginLeft","fontWeight","fontSize","color","padding","styles","formContainer","label","label1","width","minDate","maxDate","dateIcon","position","left","top","dateInput","checkdob","loginBox","text","registerButton","registerButtonText","StyleSheet","create","container","button","height","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","buttonView","buttonView1","buttonText","cancelButtonText","textAlign","scrollview","firstNameModal","logo","borderWidth","borderColor","paddingLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n    View,\r\n    Text,\r\n    Modal,\r\n    StyleSheet,\r\n    TouchableOpacity,\r\n    Alert,\r\n    ScrollView,\r\n    ToastAndroid\r\n} from \"react-native\";\r\nimport { Input, Icon, Avatar } from \"react-native-elements\";\r\nimport MyHeader from \"../components/MyHeader\";\r\nimport db from \"../config\";\r\nimport firebase from \"firebase\";\r\nimport { RFValue } from \"react-native-responsive-fontsize\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport DatePicker from 'react-native-datepicker'\r\n\r\nexport default class ProfileScreen extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            contact: \"\",\r\n            docId: \"\",\r\n            userid: firebase.auth().currentUser.email,\r\n            image: '#',\r\n            name: \"\",\r\n            section: '',\r\n            grade: '',\r\n            id: '',\r\n            newPassword: '',\r\n            password: '',\r\n            date: ''\r\n        };\r\n    }\r\n\r\n    resetnewPassword = (newPassword, password, user) => {\r\n        var navigation = this.props.navigation\r\n        var user = firebase.auth().currentUser;\r\n        if (newPassword === password) {\r\n            user.updatePassword(newPassword).then(function () {\r\n                ToastAndroid.showWithGravityAndOffset(\r\n                    \"Password updated Successfully\",\r\n                    ToastAndroid.LONG,\r\n                    ToastAndroid.BOTTOM,\r\n                    25,\r\n                    50\r\n                ),\r\n                    db.collection('students')\r\n                        .doc(firebase.auth().currentUser.email)\r\n                        .update({\r\n                            mainPassword: newPassword\r\n                        }),\r\n                    firebase.auth().signOut(),\r\n                    navigation.navigate(\"LoginScreen\");\r\n            }).catch(function (error) {\r\n                var errorMessage = error.message;\r\n                Alert.alert(errorMessage)\r\n            });\r\n        } else {\r\n            Alert.alert(\"password doesn't match\\nCheck your password.\")\r\n        }\r\n    }\r\n\r\n    profileUpdate = (url) => {\r\n        db.collection(\"students\")\r\n            .doc(this.state.userid)\r\n            .update({\r\n                imageurl: url\r\n            })\r\n    }\r\n\r\n    getUserDetails = () => {\r\n        db.collection(\"students\")\r\n            .where(\"email_id\", \"==\", this.state.userid)\r\n            .onSnapshot((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                    this.setState({\r\n                        name: doc.data().name,\r\n                        grade: doc.data().grade,\r\n                        section: doc.data().section,\r\n                        contact: doc.data().contact,\r\n                        id: doc.data().id,\r\n                        docId: doc.id,\r\n                    });\r\n                });\r\n            });\r\n    }\r\n\r\n    selectPicture = async () => {\r\n        const { cancelled, uri } = await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n            allowsEditing: true,\r\n            aspect: [4, 3],\r\n            quality: 1,\r\n        });\r\n\r\n        if (!cancelled) {\r\n            this.uploadImage(uri, this.state.userid);\r\n        }\r\n    };\r\n\r\n    uploadImage = async (uri, imageName) => {\r\n        var response = await fetch(uri);\r\n        var blob = await response.blob();\r\n\r\n        var ref = firebase\r\n            .storage()\r\n            .ref()\r\n            .child(\"user_profiles/\" + imageName);\r\n\r\n        return ref.put(blob).then((response) => {\r\n            this.fetchImage(imageName);\r\n        });\r\n    };\r\n\r\n    fetchImage = (imageName) => {\r\n        var storageRef = firebase\r\n            .storage()\r\n            .ref()\r\n            .child(\"user_profiles/\" + imageName);\r\n\r\n        storageRef\r\n            .getDownloadURL()\r\n            .then((url) => {\r\n                this.setState({ image: url }),\r\n                    this.profileUpdate(url)\r\n            })\r\n            .catch((error) => {\r\n                this.setState({ image: \"https://firebasestorage.googleapis.com/v0/b/inbo-chat-a81c7.appspot.com/o/user_profiles%2F0c3b3adb1a7530892e55ef36d3be6cb8.png?alt=media&token=7818f4b2-e6cf-4342-8666-424c4636a430\" });\r\n            });\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.getUserDetails();\r\n        this.fetchImage(this.state.userid);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View style={{ flex: 1.12, backgroundColor: '#ffefff' }}>\r\n                <ScrollView>\r\n\r\n                    <View style={{ flex: 0.12 }}>\r\n                        <MyHeader title=\"Profile\" navigation={this.props.navigation} />\r\n                    </View>\r\n                    <View style={{ flex: 0.35 }}>\r\n                        <View\r\n                            style={{\r\n                                flex: 0.3,\r\n                                justifyContent: \"center\",\r\n                                alignItems: \"center\",\r\n                                marginTop: 20\r\n                            }}\r\n                        >\r\n\r\n                            <Avatar\r\n                                rounded\r\n                                source={{\r\n                                    uri: this.state.image,\r\n                                }}\r\n                                size={RFValue(200)}\r\n                                onPress={() => this.selectPicture()}\r\n                                title={this.state.name}\r\n                                showEditButton\r\n                            />\r\n\r\n\r\n                            <View style={{ marginTop: -30, alignItems: 'flex-end', marginLeft: RFValue(133) }}>\r\n                                <Icon name='camera-retro' type='font-awesome-5' color=\"#fabf10\" solid={true} />\r\n                            </View>\r\n\r\n                            <Text\r\n                                style={{\r\n                                    fontWeight: \"300\",\r\n                                    fontSize: RFValue(20),\r\n                                    color: \"#000\",\r\n                                    padding: RFValue(10),\r\n                                }}\r\n                            >\r\n                                {this.state.name}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n\r\n\r\n                    <View style={styles.formContainer}>\r\n                        <View\r\n                            style={{\r\n                                flex: 0.65,\r\n                            }}\r\n                        >\r\n                            <Text style={styles.label}>Name </Text>\r\n                            <Text style={styles.label1}>{this.state.name}</Text>\r\n                            <Text style={styles.label}>Contact </Text>\r\n                            <Text style={styles.label1}>{this.state.contact}</Text>\r\n                            <Text style={styles.label}>Grade </Text>\r\n                            <Text style={styles.label1}>{this.state.grade}</Text>\r\n                            <Text style={styles.label}>Section </Text>\r\n                            <Text style={styles.label1}>{this.state.section}</Text>\r\n                            <Text style={styles.label}>USER ID </Text>\r\n                            <Text style={styles.label1}>{this.state.userid}</Text>\r\n                            <Text style={styles.label}>PASS ID </Text>\r\n                            <Text style={styles.label1}>{this.state.id}</Text>\r\n                            <Text style={styles.label}>Date of Birth </Text>\r\n                            <DatePicker\r\n                                style={{ width: 200, marginLeft: RFValue(10) }}\r\n                                date={this.state.date}\r\n                                mode=\"date\"\r\n                                placeholder=\"select date\"\r\n                                format=\"DD-MM-YYYY\"\r\n                                minDate={this.state.minDate}\r\n                                maxDate={this.state.maxDate}\r\n                                confirmBtnText=\"Confirm\"\r\n                                cancelBtnText=\"Cancel\"\r\n                                customStyles={{\r\n                                    dateIcon: {\r\n                                        position: 'absolute',\r\n                                        left: 0,\r\n                                        top: 4,\r\n                                        marginLeft: 0\r\n                                    },\r\n                                    dateInput: {\r\n                                        marginLeft: 36\r\n                                    }\r\n                                }}\r\n                                onDateChange={(date) => { \r\n                                    this.setState({ checkdob: date }) \r\n                                    \r\n                                }}\r\n                            />\r\n                            <View style={{ marginTop: RFValue(15), alignItems: 'center' }}>\r\n                                <Text style={styles.label}>Reset Password </Text>\r\n                                <Input\r\n                                    style={styles.loginBox}\r\n                                    placeholder={'Password'}\r\n                                    secureTextEntry={true}\r\n                                    onChangeText={(text) => {\r\n                                        this.setState({\r\n                                            password: text,\r\n                                        });\r\n                                    }}\r\n                                    leftIcon={\r\n                                        <Icon\r\n                                            name=\"user-lock\"\r\n                                            size={RFValue(35)}\r\n                                            color=\"#fabf10\"\r\n                                            type=\"font-awesome-5\"\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <Input\r\n                                    style={styles.loginBox}\r\n                                    placeholder={'Confrim Password'}\r\n                                    secureTextEntry={true}\r\n                                    onChangeText={(text) => {\r\n                                        this.setState({\r\n                                            newPassword: text,\r\n                                        });\r\n                                    }}\r\n                                    leftIcon={\r\n                                        <Icon\r\n                                            name=\"user-lock\"\r\n                                            size={RFValue(35)}\r\n                                            color=\"#fabf10\"\r\n                                            type=\"font-awesome-5\"\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <TouchableOpacity\r\n                                    style={styles.registerButton}\r\n                                    onPress={() => {\r\n                                        this.resetnewPassword(this.state.newPassword, this.state.password, firebase.auth().currentUser.email)\r\n                                    }}>\r\n                                    <Text style={styles.registerButtonText}>Reset Password</Text>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                        </View>\r\n                    </View>\r\n                </ScrollView>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        backgroundColor: \"#E5F7FE\"\r\n    },\r\n    formContainer: {\r\n        flex: 0.88,\r\n        justifyContent: 'center',\r\n    },\r\n    label: {\r\n        fontSize: RFValue(15),\r\n        color: \"#717D7E\",\r\n        fontWeight: 'bold',\r\n        padding: RFValue(10),\r\n        marginLeft: RFValue(20)\r\n    },\r\n    label1: {\r\n        fontSize: RFValue(18),\r\n        color: \"#a901ff\",\r\n        fontWeight: 'bold',\r\n        marginLeft: RFValue(50)\r\n    },\r\n    button: {\r\n        width: \"75%\",\r\n        height: RFValue(60),\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        borderRadius: RFValue(50),\r\n        backgroundColor: \"#32867d\",\r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 8,\r\n        },\r\n        shadowOpacity: 0.44,\r\n        shadowRadius: 10.32,\r\n        elevation: 16,\r\n        marginTop: RFValue(35),\r\n    },\r\n    buttonView: {\r\n        flex: 0.22,\r\n        alignItems: \"center\",\r\n        marginTop: RFValue(150),\r\n    },\r\n    buttonView1: {\r\n        flex: 0.22,\r\n        alignItems: \"center\",\r\n        marginTop: RFValue(50),\r\n    },\r\n    buttonText: {\r\n        fontSize: RFValue(23),\r\n        fontWeight: \"bold\",\r\n        color: \"#fff\",\r\n    },\r\n    cancelButtonText: {\r\n        fontSize: RFValue(20),\r\n        fontWeight: 'bold',\r\n        color: \"#32867d\",\r\n        marginTop: RFValue(10),\r\n        textAlign: 'center'\r\n    },\r\n    scrollview: {\r\n        flex: 1,\r\n        backgroundColor: \"#fff\"\r\n    },\r\n    firstNameModal: {\r\n        flex: 0.5,\r\n        height: 150\r\n    },\r\n    logo: {\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        padding: RFValue(10),\r\n        height: RFValue(280)\r\n    },\r\n    loginBox: {\r\n        width: \"80%\",\r\n        height: RFValue(50),\r\n        borderWidth: 1.5,\r\n        borderColor: \"#ffffff\",\r\n        fontSize: RFValue(20),\r\n        paddingLeft: RFValue(10),\r\n    },\r\n    registerButton: {\r\n        width: \"75%\",\r\n        height: RFValue(50),\r\n        marginTop: RFValue(20),\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        borderRadius: RFValue(3),\r\n        backgroundColor: \"#32867d\",\r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 8,\r\n        },\r\n        shadowOpacity: 0.44,\r\n        shadowRadius: 10.32,\r\n        elevation: 16,\r\n        marginTop: RFValue(10),\r\n    },\r\n    registerButtonText: {\r\n        fontSize: RFValue(23),\r\n        fontWeight: \"bold\",\r\n        color: \"#fff\",\r\n    },\r\n});"]},"metadata":{},"sourceType":"module"}